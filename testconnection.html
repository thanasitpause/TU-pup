<!DOCTYPE html>
<html>
<head>
  <title>Supabase Test</title>
  <!-- นำเข้า Supabase JavaScript Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- จากนั้นค่อยนำเข้า supabase-config.js -->
  <script src="js/supabase-config.js"></script>
</head>
<body>
  <h1>Supabase Test</h1>
  <script>
    // ทดสอบดึงข้อมูลจากตาราง posts
    async function testSupabase() {
      try {
        const { data, error } = await supabase
          .from('posts')
          .select('*')
          .limit(5);
        
        if (error) throw error;
        console.log('Posts:', data);
        document.body.innerHTML += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
      } catch (error) {
        console.error('Error:', error);
        document.body.innerHTML += `<p>Error: ${error.message}</p>`;
      }
    }
    
    testSupabase();

    // เพิ่มลงในหน้า HTML หรือสร้างไฟล์ add-test-data.js แยกต่างหาก
async function addTestData() {
  // ล็อกอินด้วย email และรหัสผ่านก่อน (อาจต้องสร้างผู้ใช้ในหน้า Authentication ของ Supabase ก่อน)
  const { data: { user }, error: loginError } = await supabase.auth.signInWithPassword({
    email: 'testuser000@gmail.com',
    password: 'Za1230123'
  });
  
  if (loginError) {
    console.error('Error logging in:', loginError);
    return;
  }
  
  // เพิ่มข้อมูลทดสอบ
  const { data, error } = await supabase
    .from('posts')
    .insert([
      {
        title: 'ทดสอบกระทู้ที่ 1',
        content: 'นี่คือเนื้อหาทดสอบของกระทู้แรก',
        author_id: user.id,
        author_name: user.user_metadata?.display_name || user.email,
        image_urls: [],
        view_count: 0,
        comment_count: 0
      }
    ]);
    
  if (error) {
    console.error('Error adding test data:', error);
  } else {
    console.log('Test data added successfully');
    location.reload(); // รีโหลดหน้าเพื่อดูข้อมูลใหม่
  }
}

// เพิ่มปุ่มสำหรับเพิ่มข้อมูลทดสอบ
document.body.innerHTML += `<button onclick="addTestData()" style="margin-top: 20px;">เพิ่มข้อมูลทดสอบ</button>`;
  </script>
</body>
</html>